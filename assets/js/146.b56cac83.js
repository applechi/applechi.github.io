(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{460:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("strong",[s._v("高并发、微服务 、性能调优实战案例100讲，所有案例均源于个人工作实战，均配合代码落地")])]),s._v(" "),t("p",[s._v("加我微信："),t("span",{staticStyle:{"font-weight":"bold",color:"red"}},[s._v("itsoku")]),s._v("，所有案例均提供在线答疑。")]),s._v(" "),t("h1",{attrs:{id:"第81节-评论系统如何设计-一次性给你讲清楚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第81节-评论系统如何设计-一次性给你讲清楚"}},[s._v("#")]),s._v(" 第81节 评论系统如何设计，一次性给你讲清楚")]),s._v(" "),t("p",[s._v("非常实用的一节，先收藏点赞，慢慢看。")]),s._v(" "),t("p",[t("span",{staticStyle:{"font-weight":"bold",color:"red"}},[s._v("目前整个课程59块钱，100个案例，含所有源码 & 文档 & 技术支持，可点击左下角小黄车了解")])]),s._v(" "),t("h1",{attrs:{id:"_1、前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、前言"}},[s._v("#")]),s._v(" 1、前言")]),s._v(" "),t("p",[s._v("评论功能，属于非常常见的功能。")]),s._v(" "),t("p",[s._v("本文从评论功能的需求出发，来看下评论表如何设计，以及通过此表，如何实现评论中各种功能。")]),s._v(" "),t("p",[s._v("非常硬核，大家慢慢看。")]),s._v(" "),t("h1",{attrs:{id:"_2、先来了解需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、先来了解需求"}},[s._v("#")]),s._v(" 2、先来了解需求")]),s._v(" "),t("p",[s._v("假如我们开发了一个短视频的网站，用户可以对视频进行评论，要实现二级评论的功能。")]),s._v(" "),t("p",[s._v("先来看下什么是一级评论和二级评论。")]),s._v(" "),t("h2",{attrs:{id:"_2-1、一级评论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、一级评论"}},[s._v("#")]),s._v(" 2.1、一级评论")]),s._v(" "),t("p",[s._v("对视频直接发表的评论，属于一级评论，如下图，下面这2条记录都是一级评论，评论列表默认只显示一级评论，支持分页")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827133300955.png",alt:"image-20240827133300955"}})]),s._v(" "),t("h2",{attrs:{id:"_2-2、二级评论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、二级评论"}},[s._v("#")]),s._v(" 2.2、二级评论")]),s._v(" "),t("p",[s._v("一级评论下面挂的所有的评论属于二级评论，如下图")]),s._v(" "),t("ul",[t("li",[s._v("包含了对一级评论的回复")]),s._v(" "),t("li",[s._v("以及对一级评论下面回复的回复")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827134402710.png",alt:"image-20240827134402710"}})]),s._v(" "),t("h1",{attrs:{id:"_3、评论表设计-t-comment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、评论表设计-t-comment"}},[s._v("#")]),s._v(" 3、评论表设计(t_comment)")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("字段")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("comment_id")]),s._v(" "),t("td",[s._v("评论记录id，主键")])]),s._v(" "),t("tr",[t("td",[s._v("video_id")]),s._v(" "),t("td",[s._v("被评论的视频id")])]),s._v(" "),t("tr",[t("td",[s._v("user_id")]),s._v(" "),t("td",[s._v("评论者用户id")])]),s._v(" "),t("tr",[t("td",[s._v("root_comment_id")]),s._v(" "),t("td",[s._v("根评论id，如果是一级评论，则为0，如果是二级评论，则为一级评论的id")])]),s._v(" "),t("tr",[t("td",[s._v("reply_to_comment_id")]),s._v(" "),t("td",[s._v("指向被回复的评论id，如果是一级评论，则为0")])]),s._v(" "),t("tr",[t("td",[s._v("reply_to_user_id")]),s._v(" "),t("td",[s._v("指向被回复的用户id，如果是一级评论，则为null；这个属于冗余字段，便于查询")])]),s._v(" "),t("tr",[t("td",[s._v("content")]),s._v(" "),t("td",[s._v("评论的内容")])]),s._v(" "),t("tr",[t("td",[s._v("create_time")]),s._v(" "),t("td",[s._v("评论时间")])]),s._v(" "),t("tr",[t("td",[s._v("count")]),s._v(" "),t("td",[s._v("一级评论下二级评论数量，当前记录是一级评论时，此值才有意义，当前记录是二级评论，此值为0")])])])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exists")]),s._v(" t_comment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tcomment_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评论id，主键'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tvideo_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'被评论的视频id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tuser_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评论者用户id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\troot_comment_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'根评论id，如果是一级评论，则为0，如果是二级评论，则为一级评论的id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\treply_to_comment_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'指向被回复的评论id，如果是一级评论，则为0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\treply_to_user_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'指向被回复的用户id，如果是一级评论，则为null；这个属于冗余字段，便于查询'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcontent "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TEXT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评论的内容'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcreate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("datetime")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评论时间'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcount "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'一级评论下二级评论数量，当前记录是一级评论时，此值才有意义，当前记录是二级评论，此值为0'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("下面我们来看演示下，通过这个表如何实现评论的各种功能。")]),s._v(" "),t("h1",{attrs:{id:"_4、功能演示-通过此表实现各种功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、功能演示-通过此表实现各种功能"}},[s._v("#")]),s._v(" 4、功能演示：通过此表实现各种功能")]),s._v(" "),t("p",[s._v("假如视频id是1")]),s._v(" "),t("h2",{attrs:{id:"功能1-对视频发表一级评论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能1-对视频发表一级评论"}},[s._v("#")]),s._v(" 功能1：对视频发表一级评论")]),s._v(" "),t("h3",{attrs:{id:"入参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参"}},[s._v("#")]),s._v(" 入参")]),s._v(" "),t("ul",[t("li",[s._v("user_id：用户id")]),s._v(" "),t("li",[s._v("video_id：视频id")]),s._v(" "),t("li",[s._v("content：评论内容")])]),s._v(" "),t("h3",{attrs:{id:"sql脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql脚本"}},[s._v("#")]),s._v(" sql脚本")]),s._v(" "),t("p",[s._v("假如：user_id = 用户a, video_id = 1, content = 很好看啊")]),s._v(" "),t("p",[s._v("sql脚本如下：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" t_comment \n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户a'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'很好看啊'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"评论表当前数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#评论表当前数据"}},[s._v("#")]),s._v(" 评论表当前数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_comment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20240827143320539.png",alt:"image-20240827143320539"}})]),s._v(" "),t("h2",{attrs:{id:"功能2-分页查询一级评论列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能2-分页查询一级评论列表"}},[s._v("#")]),s._v(" 功能2：分页查询一级评论列表")]),s._v(" "),t("h3",{attrs:{id:"入参-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-2"}},[s._v("#")]),s._v(" 入参")]),s._v(" "),t("ul",[t("li",[s._v("video_id：视频id")]),s._v(" "),t("li",[s._v("page：第几页，从1开始，1表示第1页")]),s._v(" "),t("li",[s._v("page_size：每页大小，默认为10")])]),s._v(" "),t("h3",{attrs:{id:"查询sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询sql"}},[s._v("#")]),s._v(" 查询sql")]),s._v(" "),t("p",[s._v("假如：video_id = 1, page = 1, page_size = 10")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n\tt_comment\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n\tvideo_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" root_comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("\n\tcreate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("关键点：")]),s._v(" "),t("ul",[t("li",[s._v("root_comment_id = 0，表示查询的是一级评论")])])]),s._v(" "),t("h3",{attrs:{id:"添加索引优化性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加索引优化性能"}},[s._v("#")]),s._v(" 添加索引优化性能")]),s._v(" "),t("p",[s._v("目前表中没有添加索引，所以上面这个sql查询比较慢，我们可以添加一个组合索引，3个字段：(video_id, root_comment_id, create_time)")]),s._v(" "),t("p",[s._v("这样上面这个查询条件中的2个字段可以用到这个索引，且排序条件也可以用到这个索引进行排序，效率高")]),s._v(" "),t("p",[s._v("创建索引脚本如下")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_video_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"功能3-对一级评论进行回复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能3-对一级评论进行回复"}},[s._v("#")]),s._v(" 功能3：对一级评论进行回复")]),s._v(" "),t("p",[s._v("用户b需要对用户a下面这条1级评论进行回复，回复内容：剧情很精彩啊")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827143320539.png",alt:"image-20240827143320539"}})]),s._v(" "),t("p",[s._v("sql脚本如下")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 对一级评论进行回复")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" t_comment \n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户b'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户a'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'剧情很精彩啊'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 更新一级评论中二级评论的数量，count+1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("查看下评论表当前数据："),t("code",[s._v("select * from t_comment;")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827143358967.png",alt:"image-20240827143358967"}})]),s._v(" "),t("h2",{attrs:{id:"功能4-对二级评论进行回复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能4-对二级评论进行回复"}},[s._v("#")]),s._v(" 功能4：对二级评论进行回复")]),s._v(" "),t("p",[s._v("用户c，对刚才上面用户b发表的二级评论（comment_id=2）进行回复，回复内容：确实，演员的演技也都在线")]),s._v(" "),t("p",[s._v("sql脚本如下")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 对二级评论进行回复")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" t_comment \n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户c'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户b'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'确实，演员的演技也都在线'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 更新一级评论中二级评论的数量，count+1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("查看下评论表当前数据："),t("code",[s._v("select * from t_comment;")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827143809891.png",alt:"image-20240827143809891"}})]),s._v(" "),t("h2",{attrs:{id:"功能5-分页查询二级评论列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能5-分页查询二级评论列表"}},[s._v("#")]),s._v(" 功能5：分页查询二级评论列表")]),s._v(" "),t("h3",{attrs:{id:"查询条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询条件"}},[s._v("#")]),s._v(" 查询条件")]),s._v(" "),t("ul",[t("li",[s._v("video_id：视频id")]),s._v(" "),t("li",[s._v("root_comment_id：一级评论id")]),s._v(" "),t("li",[s._v("page：当前页码，从1开始，1表示第1页")]),s._v(" "),t("li",[s._v("page_size：每页大小，默认为10")])]),s._v(" "),t("h3",{attrs:{id:"查询sql-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询sql-2"}},[s._v("#")]),s._v(" 查询sql")]),s._v(" "),t("p",[s._v("假如：video_id = 1, root_comment_id = 1,  page = 1,  page_size = 10")]),s._v(" "),t("p",[s._v("查询sql如下")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n\tt_comment\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n\tvideo_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" root_comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("\n\tcreate_time "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("由于，评论表中有个组合索引：(video_id, root_comment_id, create_time)，所以这个查询会命中这个索引，会很快。")])]),s._v(" "),t("p",[s._v("查询结果")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20240827144505400.png",alt:"image-20240827144505400"}})]),s._v(" "),t("h2",{attrs:{id:"功能6-发表评论的接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能6-发表评论的接口"}},[s._v("#")]),s._v(" 功能6：发表评论的接口")]),s._v(" "),t("p",[s._v("不管是发表一级评论，还是对一级评论进行回复，还是对二级评论进行回复，还是对回复进行回复，可以共用一个接口。")]),s._v(" "),t("p",[s._v("下面看下这个接口如何设计，伪代码如下")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 发表评论或对评论进行回复\n * @param user_id 评论者id\n * @param content 评论内容\n * @param video_id 视频id\n * @param reply_to_comment_id 被回复的评论id，如果发表一级评论，则此参数为null，如果是二级评论，则此参数为被回复的评论id\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rollbackFor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addComment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1、评论id（可以通过分布式id生成工具生成);")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 评论id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2、若 reply_to_comment_id 为空，表示发表的是一级评论")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2.1、插入评论")]),s._v("\n        insert t_comment\n\t        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        values\n        \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("#"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3、reply_to_comment_id 不为空，表示是对评论进行回复")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.1、根据 reply_to_comment_id 获取被回复的评论记录")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Comment")]),s._v(" comment "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" from t_comment where comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.2、获取一级评论id")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" root_comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" comment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 被回复的用户id")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" reply_to_user_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" comment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.3、插入评论")]),s._v("\n        insert t_comment\n        \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        values\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("#"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("video_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("reply_to_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("reply_to_user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.4、更新一级评论的count = count + 1")]),s._v("\n        update t_comment set count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" where comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("root_comment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("h2",{attrs:{id:"功能7-根据评论id-删除评论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能7-根据评论id-删除评论"}},[s._v("#")]),s._v(" 功能7：根据评论id，删除评论")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" comment_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#{评论id}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这个sql根据主键删除记录，很快。")]),s._v(" "),t("h2",{attrs:{id:"功能8-用户查询自己的评论列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能8-用户查询自己的评论列表"}},[s._v("#")]),s._v(" 功能8：用户查询自己的评论列表")]),s._v(" "),t("p",[s._v("评论者可能需要查看自己的评论列表，可以通过下面这个sql实现")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#{用户id} order by create_time desc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("可以添加一个组合索引：(user_id, create_time)，来提升这个sql的查询性能。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_user_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" t_comment "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"_5、拓展-数据量大了怎么办"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、拓展-数据量大了怎么办"}},[s._v("#")]),s._v(" 5、拓展：数据量大了怎么办？")]),s._v(" "),t("h2",{attrs:{id:"_5-1、导致查询缓慢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1、导致查询缓慢"}},[s._v("#")]),s._v(" 5.1、导致查询缓慢")]),s._v(" "),t("p",[s._v("当评论表中的数据量太大，会导致下面2个查询比较慢")]),s._v(" "),t("ol",[t("li",[s._v("用户查询某个视频下面的评论列表，主要检索条件：视频id")]),s._v(" "),t("li",[s._v("用户查询自己发表的评论列表，主要检索条件：用户id")])]),s._v(" "),t("h2",{attrs:{id:"_5-2、如何解决-分表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2、如何解决-分表"}},[s._v("#")]),s._v(" 5.2、如何解决？分表")]),s._v(" "),t("p",[s._v("具体怎么分表呢？评论数据可以保存2份，2份采用不同的分表键，来解决上面2中查询慢的场景")]),s._v(" "),t("ol",[t("li",[s._v("根据视频id进行分表，表名以t_comment_video开头，比如创建128张表，这个可以解决根据视频id查询评论列表缓慢的问题")]),s._v(" "),t("li",[s._v("根据用户id进行分表，表名以t_comment_user开头，比如创建128张表，这个可以解决用户查询自己发表的评论列表慢的问题")])]),s._v(" "),t("h2",{attrs:{id:"_5-3、分表后如何写入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3、分表后如何写入数据"}},[s._v("#")]),s._v(" 5.3、分表后如何写入数据")]),s._v(" "),t("p",[s._v("此时发表评论会向2个表中写入数据：t_comment_video、t_comment_user")]),s._v(" "),t("p",[s._v("有2种方式")]),s._v(" "),t("ol",[t("li",[s._v("方式1：同时写入2张表")]),s._v(" "),t("li",[s._v("方式2：异步的方式，先写t_comment_video，然后通过mq异步写到t_comment_user表，更新或删除也是一样的，先操作t_comment_video，然后通过mq，同步到t_comment_user表；这种方式性能可能更高一些，复杂性上升了")])]),s._v(" "),t("h1",{attrs:{id:"高并发-微服务-性能调优实战案例100讲"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高并发-微服务-性能调优实战案例100讲"}},[s._v("#")]),s._v(" 高并发 & 微服务 & 性能调优实战案例100讲")]),s._v(" "),t("h2",{attrs:{id:"已更新-81-节课"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#已更新-81-节课"}},[s._v("#")]),s._v(" 已更新 81 节课")]),s._v(" "),t("p",[t("span",{staticStyle:{"font-weight":"bold",color:"red"}},[s._v("目前整个课程59块钱，含所有源码 & 文档 & 技术支持，一杯咖啡的价格，还没下手的朋友，赶紧了")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 分片上传实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 通用并发处理工具类实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 实现一个好用接口性能压测工具类\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" 超卖问题的"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("种解决方案，也是防止并发修改数据出错的通用方案\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Semaphore")]),s._v("实现接口限流实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.")]),s._v(" 并行查询，优化接口响应速度实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.")]),s._v(" 接口性能优化之大事务优化\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.")]),s._v(" 通用的"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Excel")]),s._v("动态导出功能实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.")]),s._v(" 手写线程池管理器，管理"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("监控所有线程池\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.")]),s._v(" 动态线程池\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("实现动态"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Job")]),s._v("实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.")]),s._v(" 并行查询，性能优化利器，可能有坑\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.")]),s._v(" 幂等的"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("种解决方案，吃透幂等性问题\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.")]),s._v(" 接口通用返回值设计与实现\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.")]),s._v(" 接口太多，各种dto、vo不计其数，如何命名？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.")]),s._v(" 一个业务太复杂了，方法太多，如何传参？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.")]),s._v(" 接口报错，如何快速定位日志？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.")]),s._v(" 线程数据共享必学的"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("个工具类："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadLocal")]),s._v("、"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InheritableThreadLocal")]),s._v("、"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TransmittableThreadLocal")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.")]),s._v(" 通过"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AOP")]),s._v("统一打印请求链路日志，排错效率飞升\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.")]),s._v(" 大批量任务处理常见的方案（模拟余额宝发放收益）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.")]),s._v(" 并发环境下，如何验证代码是否正常？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySql")]),s._v("和"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Redis")]),s._v("数据一致性\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("数据脱敏优雅设计与实现\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.")]),s._v(" 一行代码搞定系统操作日志\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Aop")]),s._v("简化"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyBatis")]),s._v("分页功能\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadLocal")]),s._v(" 遇到线程池有大坑 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 通用解决方案\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("读写分离实战（一个注解搞定读写分离 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" 强制路由主库）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("典型的使用场景\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("如何确保消息的可靠性\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中，手把手教你实现事务消息\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.")]),s._v(" 手写一个好用的延迟任务处理工具类\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("延迟消息通用方案实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("消息幂等消费 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 消费失败衰减式重试通用方案 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 代码 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 文档\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题：顺序消息通用方案实战 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 代码落地 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 文档\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("专题：消息积压相关问题及解决思路\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36.")]),s._v(" 分布式事务"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("最终一致性"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("实现跨库转账（案例"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("源码"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("文档）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37.")]),s._v(" 分布式事务"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MQ")]),s._v("最终一致性"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("实现电商账户余额提现到微信钱包（案例"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("源码"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("文档）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.")]),s._v(" 分布式事务：通用的"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TCC")]),s._v("分布式事务生产级代码落地实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39.")]),s._v(" 分布式锁详解\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40.")]),s._v(" 分享一个特别好用的"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Redissson")]),s._v("分布式锁工具类\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("41.")]),s._v(" 一个注解轻松搞定分布式锁\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42.")]),s._v(" 微服务中如何传递公共参数？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43.")]),s._v(" 接口幂等，通用方案 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 代码落地\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44.")]),s._v(" 微服务链路日志追踪实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45.")]),s._v(" 接口测试利器"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Client")]),s._v("，不用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Postman")]),s._v("也可以\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.")]),s._v(" 封装"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyBatis")]),s._v("，实现通用无"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v("版"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CRUD")]),s._v("功能"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ORM")]),s._v("框架\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyBatisPlus")]),s._v(" 轻松实现多租户数据隔离\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("48.")]),s._v(" 电商系统"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("资金账户表设计 及 应用实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UML")]),s._v("画图神器："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PlantUML")]),s._v("，画图效率飞升\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50.")]),s._v(" 多线程事务，"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("秒插入百万数据\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中自动初始化数据库功能，非常好用\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("优雅停机\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("53.")]),s._v(" 分享一个特好用的集合工具类，开发效率轻松翻倍\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("54.")]),s._v(" 性能调优：线程死锁相关问题\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55.")]),s._v(" 如何排查"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OOM")]),s._v("？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56.")]),s._v(" cpu飙升，如何快速排查？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("57.")]),s._v(" cpu飙升，使用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Arthas")]),s._v("，"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("秒定位问题\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("58.")]),s._v(" 接口响应慢，使用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Arthas")]),s._v("，"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("秒定位问题代码\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.")]),s._v(" 策略模式，轻松消除ifelse代码\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.")]),s._v(" 生产上，代码未生效，如何排查？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.")]),s._v(" 使用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySQL")]),s._v("，实现一个高性能，分布式id生成器\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("62.")]),s._v(" 方法执行异常，使用arthas，快速定位问题\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("63.")]),s._v(" 扫码登录详解\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64.")]),s._v(" 使用hutool生成"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("解析二维码，太方便了\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中，redis中实现排行榜\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中，"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Redis")]),s._v("如何实现查找附近的人功能？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("67.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中，接口签名，通用方案，一次性搞懂\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("68.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBoot")]),s._v("中，接口加解密，通用方案实战\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69.")]),s._v(" 分库、分表、分库分表，如何选择？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("70.")]),s._v(" 分库分表：分表字段如何选择？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("71.")]),s._v(" 分库分表：分表数量为什么建议是"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("的n次方？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72.")]),s._v(" 分库分表：如何平滑迁移数据？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("73.")]),s._v(" 并发编程有多难？值得反复研究的一个案例\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("74.")]),s._v(" 使用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Redis")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pipeline")]),s._v("，接口性能提升"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("倍\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("75.")]),s._v(" 电商中，重复支付如何解决？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("76.")]),s._v(" 千万级数据，全表update的正确姿势\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("77.")]),s._v(" 优雅实现树形菜单，适用于所有树，太好用了\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("78.")]),s._v(" 接口调用利器："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v("，吃透它\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("79.")]),s._v(" 微服务跨库查询，如何解决？一次性搞懂\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80.")]),s._v(" 逻辑删除与唯一约束冲突，如何解决？\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("81.")]),s._v(" 评论系统如何设计，一次性给你讲清楚\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br")])]),t("h2",{attrs:{id:"课程部分大纲-连载中。。。。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#课程部分大纲-连载中。。。。"}},[s._v("#")]),s._v(" 课程部分大纲，连载中。。。。")]),s._v(" "),t("p",[s._v("以下课程均来源于个人多年的实战，均提供原理讲解 && 源码落地")]),s._v(" "),t("ol",[t("li",[s._v("分片上传实战")]),s._v(" "),t("li",[s._v("通用并发处理工具类实战")]),s._v(" "),t("li",[s._v("实现一个好用接口性能压测工具类")]),s._v(" "),t("li",[s._v("超卖问题的4种解决方案，也是防止并发修改数据出错的通用方案")]),s._v(" "),t("li",[s._v("Semaphore实现接口限流实战")]),s._v(" "),t("li",[s._v("并行查询，优化接口响应速度实战")]),s._v(" "),t("li",[s._v("接口性能优化之大事务优化")]),s._v(" "),t("li",[s._v("通用的Excel动态导出功能实战")]),s._v(" "),t("li",[s._v("手写线程池管理器，管理&监控所有线程池")]),s._v(" "),t("li",[s._v("动态线程池")]),s._v(" "),t("li",[s._v("SpringBoot实现动态Job实战")]),s._v(" "),t("li",[s._v("并行查询，性能优化利器，可能有坑")]),s._v(" "),t("li",[s._v("幂等的4种解决方案，吃透幂等性问题")]),s._v(" "),t("li",[s._v("接口通用返回值设计与实现")]),s._v(" "),t("li",[s._v("接口太多，各种dto、vo不计其数，如何命名？")]),s._v(" "),t("li",[s._v("一个业务太复杂了，方法太多，如何传参？")]),s._v(" "),t("li",[s._v("接口报错，如何快速定位日志？")]),s._v(" "),t("li",[s._v("线程数据共享必学的3个工具类：ThreadLocal、InheritableThreadLocal、TransmittableThreadLocal")]),s._v(" "),t("li",[s._v("通过AOP统一打印请求链路日志，排错效率飞升")]),s._v(" "),t("li",[s._v("大批量任务处理常见的方案（模拟余额宝发放收益）")]),s._v(" "),t("li",[s._v("并发环境下，如何验证代码是否正常？")]),s._v(" "),t("li",[s._v("MySql和Redis数据一致性")]),s._v(" "),t("li",[s._v("SpringBoot数据脱敏优雅设计与实现")]),s._v(" "),t("li",[s._v("一行代码搞定系统操作日志")]),s._v(" "),t("li",[s._v("Aop简化MyBatis分页功能")]),s._v(" "),t("li",[s._v("ThreadLocal 遇到线程池有大坑 & 通用解决方案")]),s._v(" "),t("li",[s._v("SpringBoot读写分离实战（一个注解搞定读写分离 && 强制路由主库）")]),s._v(" "),t("li",[s._v("MQ专题：MQ典型的7种使用场景")]),s._v(" "),t("li",[s._v("MQ专题：如何确保消息的可靠性")]),s._v(" "),t("li",[s._v("MQ专题：SpringBoot中，手把手教你实现事务消息")]),s._v(" "),t("li",[s._v("手写一个好用的延迟任务处理工具类")]),s._v(" "),t("li",[s._v("MQ专题：延迟消息通用方案实战")]),s._v(" "),t("li",[s._v("MQ专题：消息幂等消费 & 消费失败自动重试通用方案 & 代码落地")]),s._v(" "),t("li",[s._v("MQ专题：顺序消息通用方案实战")]),s._v(" "),t("li",[s._v("MQ专题：消息积压问题")]),s._v(" "),t("li",[s._v("分布式事务-MQ最终一致性-实现跨库转账（案例+源码+文档）")]),s._v(" "),t("li",[s._v("分布式事务-MQ最终一致性-实现电商账户余额提现到微信钱包（案例+源码+文档）")]),s._v(" "),t("li",[s._v("分布式事务：通用的TCC分布式事务生产级代码落地实战")]),s._v(" "),t("li",[s._v("分布式锁详解")]),s._v(" "),t("li",[s._v("分享一个特别好用的Redissson分布式锁工具类")]),s._v(" "),t("li",[s._v("分布式锁：一个注解轻松实现布式锁")]),s._v(" "),t("li",[s._v("微服务中如何传递上下文？实战")]),s._v(" "),t("li",[s._v("接口幂等，通用方案 & 代码落地")]),s._v(" "),t("li",[s._v("微服务链路日志追踪实战")]),s._v(" "),t("li",[s._v("接口测试利器HTTP Client，不用Postman也可以")]),s._v(" "),t("li",[s._v("封装MyBatis，实现通用无SQL版CRUD功能")]),s._v(" "),t("li",[s._v("MyBatisPlus 轻松实现 多租户数据隔离")]),s._v(" "),t("li",[s._v("电商系统-资金账户表设计 及 应用实战")]),s._v(" "),t("li",[s._v("开发者必须掌握的一款UML画图工具，画图效率飞升")]),s._v(" "),t("li",[s._v("多线程事务，3秒插入百万数据")]),s._v(" "),t("li",[s._v("SpringBoot自动初始化数据库功能，太好用了")]),s._v(" "),t("li",[s._v("SpringBoot优雅停机")]),s._v(" "),t("li",[s._v("分享一个特别好用的集合工具类，开发效率大幅提升")]),s._v(" "),t("li",[s._v("性能调优：如何排查死锁？")]),s._v(" "),t("li",[s._v("如何排查OOM？")]),s._v(" "),t("li",[s._v("cpu飙升，如何快速排查？")]),s._v(" "),t("li",[s._v("cpu飙升，使用Arthas，3秒定位问题")]),s._v(" "),t("li",[s._v("接口响应慢，使用Arthas，3秒定位问题代码")]),s._v(" "),t("li",[s._v("策略模式，轻松消除ifelse代码")]),s._v(" "),t("li",[s._v("生产上，代码未生效，如何排查？")]),s._v(" "),t("li",[s._v("使用MySQL，实现一个高性能，分布式id生成器")]),s._v(" "),t("li",[s._v("方法执行异常，使用arthas，快速定位问题")]),s._v(" "),t("li",[s._v("扫码登录详解")]),s._v(" "),t("li",[s._v("使用hutool生成&解析二维码，太方便了")]),s._v(" "),t("li",[s._v("SpringBoot中，Redis如何实现排行榜功能？")]),s._v(" "),t("li",[s._v("SpringBoot中，Redis如何实现查找附近的人功能？")]),s._v(" "),t("li",[s._v("SpringBoot中，接口签名，通用方案，一次性搞懂")]),s._v(" "),t("li",[s._v("SpringBoot中，接口加解密，通用方案实战")]),s._v(" "),t("li",[s._v("分库、分表、分库分表，如何选择？")]),s._v(" "),t("li",[s._v("分库分表：分表字段如何选择？")]),s._v(" "),t("li",[s._v("分库分表：分表数量为什么建议是2的n次方？")]),s._v(" "),t("li",[s._v("分库分表：如何平滑迁移数据？")]),s._v(" "),t("li",[s._v("并发编程有多难？值得反复研究的一个案例")]),s._v(" "),t("li",[s._v("使用Redis Pipeline，接口性能提升10倍")]),s._v(" "),t("li",[s._v("电商系统中，如何解决重复支付？")]),s._v(" "),t("li",[s._v("千万级数据，全表update的正确姿势")]),s._v(" "),t("li",[s._v("优雅实现树形菜单，适用于所有树，太好用了")]),s._v(" "),t("li",[s._v("接口调用利器：RestTemplate，太好用了，吃透它")]),s._v(" "),t("li",[s._v("微服务跨库查询，如何解决？")]),s._v(" "),t("li",[s._v("逻辑删除与唯一约束冲突，如何解决？")]),s._v(" "),t("li",[s._v("评论系统如何设计，一次性给你讲清楚")]),s._v(" "),t("li",[s._v("更多实战案例详解")])])])}),[],!1,null,null,null);t.default=e.exports}}]);